<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><!-- InstanceBegin template="/Templates/content.dwt" codeOutsideHTMLIsLocked="false" -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>Introduction to the Insight Debugger</title>
<!-- InstanceBeginEditable name="head" --><!-- InstanceEndEditable -->
<!-- template parameters -->


<!-- InstanceParam name="homeDirectory" type="text" value="" -->





<!-- InstanceParam name="topicName" type="text" value="Introduction to the Insight Debugger" -->
<style type="text/css">
<!--
body {
	background-color: #FFFFFF;
	font-size: 16px;
	color: #000000;
	font-family: Cambria, "Times New Roman", serif;
}
table {
	background-color: #EEEEEE;
}
a:link {
	color: #000099;
}
a:visited {
	color: #000066;
}
a:hover {
	color: #FF0000;
}
.calendarDate {
	text-align: center;
	vertical-align: middle;
}
.code {
	font-family: Consolas, "Courier New", mon;
	font-size: 12px;
}
.codeInText {
	font-family: Consolas, "Courier New", mon;
	font-size: 14px;
}
.codeBlue {
	color: #000099;
	font-family: Consolas, "Courier New", mono;
	font-size: 12px;
}
.headerText {
	font-size: 24px;
	color: #000000;
	text-decoration: underline;
}
.headerText2 {
	font-size: 18px;
	color: #000000;
	text-decoration: underline;
	font-weight: normal;
}
.headerText3 {

	font-size: 16px;
	color: #000000;
	text-decoration: underline;
}
.pageHeaderText {
	font-size: 36px;
	color: #000000;
}
.red {
  color: #FF0000
}
-->
</style>
</head>

<body>
<blockquote>
  <p><span class="pageHeaderText">CS201: Introduction to the Insight Debugger</span></p>
</blockquote>
<hr />

<blockquote>
<!-- InstanceBeginEditable name="content" -->
<p>Some of you may be in the habit of debugging your code by inserting print statements to figure out what your code is doing. This is OK for beginners, but this course is going to help you climb higher than that on the learning curve. </p>
<p>Professional programmers use <em>debuggers</em>, not print statements: </p>
<ul>
	<li>print statements show you only what you <em>asked</em> your code to show you. A debugger shows you <em>everything</em> your code is doing.</li>
	<li>if you think of something else you want to look at while your code is running, you can look at it with a debugger. With print statements, you would need to stop and recompile your code. For a bug that happens infrequently and unpredictably, this could be the difference between figuring out the bug <em>right now</em> and spending another few weeks waiting for the bug to reappear. And when you finally get lucky and the bug happens again, you may <em>still</em> not have asked the right questions with your print statements. </li>
	<li>adding a print statement to code changes it (length of the code, timing, state of the operating system, etc). The bug may not appear in this new situation. You do not have to add statements to your code in order to run a debugger. </li>
	<li>print statements cannot easily show you what your object code is doing. A debugger can show you <em>everything</em> your object code is doing. </li>
	</ul>
<p>If you want to be a professional software engineer or computer scientist, <em>you will need to learn to use debuggers</em>. Getting really good at using print statements for debugging is the equivalent of getting really good at riding a bike with training wheels. Employers want programmers who don&rsquo;t need training wheels, programmers who know how to operate industrial-strength tools. </p>
<p>I will not be able to prevent you from using print statements to debug your code. But if you use print statements for debugging in this class, you will be cheating <em>yourself</em>. </p>
<p>Work to do for this lesson: </p>
<ul>
	<li>download and install <a href="http://cygwin.com" target="_blank">Cygwin</a></li>
	<li>compile <strong>intro.c</strong></li>
	<li>run the code in <strong>insight</strong> </li>
</ul>
<p class="headerText">Source-Level Debugging </p>
<p>To observe the source code in <strong>insight</strong>:	</p>
<ul><li>type<span class="code"> insight intro </span>to the Cygwin command line
	  <ul>
			<li>your code will appear in an insight Source Window </li>
		</ul>
		</li>
	<li>set a breakpoint in<span class="codeInText"> main()</span> by either:
					<ul>
						<li>clicking on one of the &ndash; characters that appear at the left side of lines of executable code</li>
						<li>type<span class="codeInText">  br main </span>in insight&rsquo;s Console Window
							<ul>
								<li>get this window by doing <em>View &rarr; Console</em> in your Source Window </li>
							</ul>
						</li>
					</ul>
	</li>
	<li>open a Local Variables window
		<ul>
			<li>get this window by doing <em>View &rarr; Local Variables</em> in your Source Window </li>
		    <li><em>this window will be blank until you run the code </em></li>
		</ul>
	</li>
	<li>run the code by either:
		<ul>
			<li>clicking on the Run icon in the Source Window tool bar</li>
			<li>type<span class="codeInText"> r </span>in insight&rsquo;s Console Window</li>
		</ul>
	</li>
	<li>a black window will appear
		<ul>
			<li>printed output will appear in this window</li>
			<li>data is entered in this window when the program asks for it<br />
				(in this case, by calling<span class="codeInText"> scanf()</span>) </li>
		</ul>
	</li>
	<li>you can now execute your <em>source code</em> line by line (this is called <em>single-stepping</em>)
			<ul>
				<li>you can use the icons on the left side of the toolbar in the Source Window</li>
				<li>or you can type commands into the console window:
					<ul>
						<li><span class="codeInText">n&nbsp;&nbsp;</span>executes the next C source statement, does not descend into functions </li>
						<li><span class="codeInText">s&nbsp;&nbsp;</span>executes the next C source statement, does descend into functions</li>
					</ul>
				</li>
				<li>as your code executes, watch the values of your variables in the Local Variables window </li>
				<li>when you&rsquo;re done, type<span class="codeInText"> c </span>in insight&rsquo;s Console Window (or click on the equivalent icon in the toolbar). This tells your program to run until either the next breakpoint or until<span class="codeInText"> main()</span> returns to the operating system. Make sure that<span class="codeInText"> main()</span> has returned (the black window will disappear). </li>
			</ul>
	</li>
	<li>now we want to run in the code again, but this time with command-line arguments:
		<ul>
			<li>type<span class="codeInText"> r xyz 33 </span>in insight&rsquo;s Console Window</li>
			<li>execute and then single-step the code as you did above</li>
			<li>note the different values that appear in the Local Variables window </li>
		</ul>
	</li>
	<li>when you&rsquo;re done, type<span class="codeInText"> c </span>in insight&rsquo;s Console Window, which tells your program to run until either the next breakpoint or until<span class="codeInText"> main()</span> returns to the operating system </li>
</ul>
<p>You now have the minimal set of skills you need to watch your <em>source code</em> running in <strong>insight</strong>.</p>
<p class="headerText">Object-Level Debugging </p>
<p>You can also use <strong>insight</strong> to watch what your object code is doing. The following instructions will show you how. Don&rsquo;t worry if this object code is mysterious to you at this time &ndash; by the end of this course you will be able to understand all of your object code. This lesson is just showing you how to <em>look at</em> object code. Much of the rest of this course will involve learning to <em>understand</em> the object code you&rsquo;re looking at. </p>
<ul>
	<li>use the breakpoint that&rsquo;s still at the beginning of<span class="codeInText"> main()</span> as a result of the previous exercise <br />
	</li>
	<li>set the Source Window to display your object code as well as your source code
		<ul>
			<li>on the right side of the window, just below the toolbar, there is a drop-down menu displaying the word SOURCE<br />
(due to a bug in insight, you may have to resize the source window to make this drop-down menu visible) </li>
			<li>set this menu to  MIXED and you will see the object code for each C statement displayed below that statement </li>
			<li><strong>insight</strong> can display your code in one of two modes:
				<ul>
					<li>AT&amp;T mode: standard in Linux and <!-- #BeginLibraryItem "/Library/textbook authors.lbi" --> <a href="http://csapp.cs.cmu.edu/" target="_blank">Bryant&nbsp;&amp;&nbsp;O&rsquo;Hallaron</a><!-- #EndLibraryItem --></li>
					<li>Intel mode: standard in the Intel documentation  </li>
					<li>to switch between these two modes, type one of these commands in the Console Window:
								<ul>
									<li><span class="codeInText">set di intel </span></li>
									<li><span class="codeInText">set di att </span></li>
								</ul>
					</li>
					</ul>
			</li>
			</ul>
	</li>
	<li>you can now execute your <em>object code</em> line by line
		<ul>
			<li>you can use the two icons just to the right of the first group on the left side of the Source Window&rsquo;s toolbar </li>
			<li>or you can type commands into the console window:
				<ul>
					<li><span class="codeInText">ni&nbsp;&nbsp;</span>executes the next assembly language statement, does not descend into functions </li>
					<li><span class="codeInText">si&nbsp;&nbsp;</span>executes the next assembly language statement, does descend into functions</li>
					<li>the<span class="codeInText"> s </span>and<span class="codeInText"> n </span>commands still work to execute one <em>source-level</em> statement at a time </li>
					</ul>
			</li>
			</ul>
	</li>
	<li>in addition to the Local Variables window, you can use the Registers and Memory windows to observe your object code. These windows are available in the Source Window&rsquo;s <em>View</em> menu. We will learn about the contents of these windows later on in the class. </li>
	<li>when you&rsquo;re done, quit <strong>insigh</strong><strong>t</strong> by either:
		<ul>
				<li>closing the Source Window </li>
			<li>doing <em>File &rarr; Exit </em> in your Source Window</li>
			</ul>
		</li>
</ul>
<p class="headerText">Next Steps </p>
<p><strong>insight</strong> has many features that are not covered in this short tutorial. I recommend that you read the <a href="http://www.redhat.com/docs/manuals/edk/EDK-1.0-Manual/getting-started-guide/gsdebug.html" target="_blank">insight manual</a> to learn about other features of insight.</p>
<p>&nbsp;</p>
<!-- InstanceEndEditable -->
</blockquote>
</body>
<!-- InstanceEnd --></html>
