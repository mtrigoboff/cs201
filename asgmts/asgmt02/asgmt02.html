<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><!-- InstanceBegin template="/Templates/asgmt.dwt" codeOutsideHTMLIsLocked="false" -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<!-- template parameters -->
<!-- InstanceParam name="course" type="text" value="CS201" -->
<!-- InstanceParam name="asgmtVersion" type="text" value="2" -->
<title>CS201 Assignment 2</title>
<style type="text/css">
<!--
.code {
	font-family: Consolas, "Courier New", Courier, monospace;
	font-size: 14px;
}
body {
	font-family: Cambria, Georgia, "Times New Roman", Times, serif;
	font-size: 14px;
}
.header {
	font-family: Cambria, Georgia, "Times New Roman", Times, serif;
	font-size: 22px;
	font-weight: normal;
	text-decoration: underline;
}
.title {
	font-size: 24px;
	font-weight: bold;
	text-decoration: underline;
	font-family: Cambria, Georgia, "Times New Roman", Times, serif;
}
table caption {
	font-size: 18px;
	text-align: left;
	line-height: 44px;
	vertical-align: top;
	text-decoration: underline;
}
th {
	font-weight: normal;
	text-align: left;
	text-decoration: underline;
}
-->
</style>
</head>
<body>
<p class="title">CS201 Assignment 2 Instructions</p>
<!-- InstanceBeginEditable name="description" -->
<p><em>Remember that you only need to do one of the assignments below.</em></p>
<p>In each of these assignments, you will be asked to write a &ldquo;math library&rdquo; function. You will be writing the function in assembly language, using gcc&rsquo;s <span style="font-weight: bold">inline assembler</span>. Class code files <span style="font-weight: bold">asm.c</span> and <span style="font-weight: bold">cpuid.c</span> are good models for how to write assembly code for gcc. (The files mentioned are available on <strong><!-- #BeginLibraryItem "/Library/class Linux machine.lbi" --> <strong>syccuxfs01.pcc.edu</strong><!-- #EndLibraryItem --></strong>). </p>
<p>You can use a mixture of C code and assembly code for these assignments, but <em>all floating point calculations (including comparisons) must be done in assembly language</em>. You should use C only for support tasks like defining  and initializing local variables, returning a value from the function, etc.</p>
<p>Your assembly code should work in the following way:</p>
<ol>
  <li>Load values from the function&rsquo;s arguments and local variables onto the floating point stack (local variables can be initialized first by C code as long as no calculations are performed).</li>
  <li>Perform the required calculation <em>entirely within the floating point stack</em>. Using <strong>stack comments</strong> in this code will help you keep track  of what&rsquo;s going on. (A stack comment is a comment that specifies what is supposed to be on the floating point stack after that instruction has executed. Or you can write stack comments to specify the situation before the instruction executes if you prefer.)</li>
  <li>Store the calculated result from the floating point stack to a local variable.</li>
</ol>
<p>The function will then return the contents of that local variable. </p>
<p>The IA-32 Architecture includes the floating point instructions needed to implement these functions (they all start with the letter &lsquo;F&rsquo;). <em>You will save yourself a lot of work if you carefully choose the right instructions</em>. This is a large and powerful instruction set, and you should make use of that power instead of &ldquo;re-inventing the wheel.&rdquo; In other words, don&rsquo;t spend a lot of time writing a lot of dumb code. Instead, spend your time <em>thinking</em> first, and you will be able to write a smaller amount of smart code.</p>
<hr />
<h3><!-- #BeginLibraryItem "/Library/Regular.lbi" --> <strong>Regular</strong><!-- #EndLibraryItem --> Version</h3>
<p>Compute the volume of a sphere according to the formula 4*&pi;<sup>3</sup>/3.</p>
<p>In <span class="code">sphereVolumeC</span>, write assembly code that gets the value of &pi; from the chip instead of using the provided constant. Do not change anything else about this function.</p>
<p>In <span class="code">sphereVolume</span>, write assembly code that calculates the value of the formula. </p>
<p>Start with the provided code file a02.c. Upload your code as <strong>a02.c</strong>. </p>
<hr />
<h3><!-- #BeginLibraryItem "/Library/Premium.lbi" --> <strong>Premium</strong><!-- #EndLibraryItem --> Version</h3>
<p>Using the <a href="http://en.wikipedia.org/wiki/Quadratic_formula" target="_blank">Quadratic Formula</a>, compute one of the roots of a quadratic equation, </p>
<p>In <span class="code">quadraticRoot</span>, write assembly code that calculates the version of the formula that <em>adds </em>the square root.</p>
<p>Because this code calls the <span class="code">sqrt</span> function from <span class="code">math.h</span>, you will need to compile it as follows on <strong></strong><!-- #BeginLibraryItem "/Library/class Linux machine.lbi" --> <strong>syccuxfs01.pcc.edu</strong><!-- #EndLibraryItem -->:</p>
<blockquote>
  <p class="code">gcc &lt;required flags&gt; a02p.c <strong>-lm</strong> -o a02p </p>
</blockquote>
<p>You can use file <span class="code">~michael.trigoboff/bin/gclm</span> to avoid having to type all of this in.</p>
<p>Start with the provided code  file a02p.c. Upload your code as <strong>a02p.c</strong>. </p>
<hr />
<!-- InstanceEndEditable -->
<p class="header">Required Platform</p>
<p>I grade your code on<!-- #BeginLibraryItem "/Library/class Linux machine.lbi" --> <strong>syccuxfs01.pcc.edu</strong><!-- #EndLibraryItem -->. Your code is required to compile and run correctly on that  machine.</p>
<p class="header">Compiling Your Code</p>
<p>You are required to use these flags when compiling your code:</p>
<blockquote>
<table width="571" border="0">
  <caption>
    Required gcc Compiler Flags
  </caption>
  <tr>
    <th width="103"><em>flag</em></th>
    <th width="411"><em>effect of specifying flag</em></th>
  </tr>
  <tr>
    <td>-<span class="code">m32</span></td>
    <td>compiles 32-bit code, disallows use of 64-bit integer registers</td>
  </tr>
  <tr>
    <td class="code">-std=gnu11</td>
    <td>allows use of newer features of C</td>
  </tr>
  <tr>
    <td class="code">-Wall</td>
    <td>compiler produces all possible warnings</td>
  </tr>
  <tr>
    <td class="code">-g</td>
    <td>includes information needed by debugger in object code</td>
  </tr>
</table>
</blockquote>
<p>Here is how you would use these flags:</p>
<blockquote>
  <p class="code">gcc -m32 -std=gnu11 -Wall -g yourcode.c -o yourcode</p>
</blockquote>
<p class="header">Grading Your Code</p>
<p>Your code needs to compile without errors or warnings and run correctly. Code that does not compile will receive zero points. Code that crashes will receive zero points.</p>
<p>I use <a href="https://en.wikipedia.org/wiki/Bash_(Unix_shell)" target="_blank">bash</a> scripts to grade your code. Because of this, it is very important that you submit your code <em>with the file name that was requested</em>. If you change the file name, my scripts will crash, your work will not be graded, you will have to resubmit a corrected version of your work, and you will lose points.</p>
<p>My scripts produce a log file containing your code, compiler warnings and errors (if any), your code's output, and some statistics that are useful to me. I then personally go through that log file to produce your grade. In other words, the scripts don't generate your grade, they just make it more convenient for <em>me</em> to generate your grade.</p>
<p class="header">To Submit This Assignment</p>
<p>Submit the requested file to Desire2Learn. &nbsp; Make sure that your code prints your name, assignment description, and number, as requested. </p>
<ul>
  <li>Be  certain to check that you completed the upload successfully. After you click  the Upload File button, you must also click the <strong>SUBMIT ASSIGNMENT </strong>button. This  is very easy to forget. If you do not do this, I will not see your work and you will get a grade of zero for the assignment. I would recommend entering an  email address so you can be notified that the upload was completed  successfully.</li>
  <li>You  may upload as many versions as you wish prior to the due date. I will only see  and grade the final one. You will not be able to upload assignments after due date.</li>
</ul>
<p>Points will be deducted for uploading a file with a name that is not as specified. Every term I get a few students whose approach to following directions is, shall we say, &ldquo;creative.&rdquo; I encourage creativity in general, but there are places where it is <u>not appropriate</u>.</p>
</body>
<!-- InstanceEnd --></html>
